cat > README.md << 'EOF'
# ðŸ” Solana KYC Compliance SDK

[![npm version](https://img.shields.io/npm/v/@gitdigital/solana-kyc-compliance-sdk)](https://www.npmjs.com/package/@gitdigital/solana-kyc-compliance-sdk)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Solana](https://img.shields.io/badge/Solana-100%25-blue?logo=solana)](https://solana.com)
[![Token Extensions](https://img.shields.io/badge/Token-Extensions-orange)](https://docs.solanalabs.com/token-extensions)

A complete on-chain KYC/AML compliance solution for Solana with native Token Extensions integration. Build compliant DeFi applications, RWA tokenization platforms, and regulated financial products on Solana.

## ðŸš€ Why On-Chain KYC?

**Problem**: Traditional KYC/AML solutions are:
- Off-chain silos with no programmability
- Lack composability with DeFi protocols
- Expensive and slow to integrate
- Not transparent or auditable

**Solution**: On-chain KYC enables:
- **Programmable compliance** - Dynamic rules based on on-chain data
- **DeFi composability** - Seamless integration with any protocol
- **Real-time validation** - Instant transfer checks
- **Transparent audit trails** - Immutable compliance records
- **Cost reduction** - Eliminate redundant verifications

## ðŸ—ï¸ Architecture Overview

### System Architecture
```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Application Layer                        â”‚
â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚â”‚   DEX/AMM   â”‚  â”‚  Lending    â”‚  â”‚  Tokenization    â”‚    â”‚
â”‚â”‚             â”‚  â”‚  Platform   â”‚  â”‚  Platform        â”‚    â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚                    â”‚
â–¼                 â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚KYC Compliance SDK Layer                      â”‚
â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚â”‚              TypeScript SDK                         â”‚    â”‚
â”‚â”‚  â€¢ getStatus() â€¢ register() â€¢ checkTransfer()       â”‚    â”‚
â”‚â”‚  â€¢ freezeWallet() â€¢ updatePolicy() â€¢ syncKYC()     â”‚    â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚                    â”‚
â–¼                 â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚On-Chain Program Layer                         â”‚
â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚â”‚         KYC Compliance Program (Rust)               â”‚    â”‚
â”‚â”‚                                                     â”‚    â”‚
â”‚â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚â”‚  â”‚  Registry   â”‚   â”‚   Policy    â”‚   â”‚ Investor â”‚ â”‚    â”‚
â”‚â”‚  â”‚    PDA      â”‚   â”‚    PDA      â”‚   â”‚  Record  â”‚ â”‚    â”‚
â”‚â”‚  â”‚             â”‚   â”‚             â”‚   â”‚   PDA    â”‚ â”‚    â”‚
â”‚â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Token Extensions Layer                         â”‚
â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚â”‚  Transfer Hook: Real-time validation                 â”‚    â”‚
â”‚â”‚  Permanent Delegate: Freeze/unfreeze authority       â”‚    â”‚
â”‚â”‚  Metadata: Compliance data on tokens                 â”‚    â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

### Token Extensions Integration
```

Token Creation Flow:

1. Create Token with Extensions
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Transfer    â”‚    â”‚ Permanent   â”‚    â”‚ Metadata    â”‚
   â”‚ Hook        â”‚â—„â”€â”€â”€â”¤ Delegate    â”‚â—„â”€â”€â”€â”¤ Pointer     â”‚
   â”‚ (Compliance â”‚    â”‚ (Freeze     â”‚    â”‚ (KYC Level, â”‚
   â”‚  Program)   â”‚    â”‚  Authority) â”‚    â”‚  Country)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Transfer Flow:

1. User initiates transfer
2. Token Program calls Transfer Hook
3. Compliance Program validates:
   Â· Sender KYC status
   Â· Receiver KYC status
   Â· Amount limits
   Â· Country restrictions
   Â· Accreditation requirements
4. If valid â†’ Transfer proceeds
5. If invalid â†’ Transfer blocked

```

### Compliance Flow Diagram
```

Registration:
Userâ”€â”€[Off-chain KYC]â”€â”€â–º KYC Provider â”€â”€[Proof]â”€â”€â–º SDK â”€â”€[Register]â”€â”€â–º On-chain Record

Transfer:
Transfer Requestâ”€â”€â–º Token Program â”€â”€â–º Transfer Hook â”€â”€â–º Compliance Check
â”‚
â”Œâ”€â”€â”€â”€â”€â”€[Valid]â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€[Invalid]â”€â”€â”€â”€â”€â”€â”
â–¼                                         â–¼
Transfer Executed                         Transfer Blocked
+ Compliance Event                         + Error Logged

```

## âš¡ Quick Start

### Installation

```bash
npm install @gitdigital/solana-kyc-compliance-sdk
# or
yarn add @gitdigital/solana-kyc-compliance-sdk
```

Basic Usage

```typescript
import { ComplianceClient } from '@gitdigital/solana-kyc-compliance-sdk';
import { Connection, Keypair, clusterApiUrl } from '@solana/web3.js';

// Initialize
const connection = new Connection(clusterApiUrl('devnet'));
const client = new ComplianceClient({
  connection,
  programId: new PublicKey('YOUR_PROGRAM_ID'),
});

// Register investor
const investorData = {
  kycLevel: 2, // Enhanced verification
  countryCode: 'US',
  investorType: 0, // Individual
  accreditationStatus: 1, // Accredited
};

const signature = await client.register(
  payerKeypair,
  investorWallet,
  investorData
);

// Check transfer
const result = await client.checkTransfer(
  sourceWallet,
  destinationWallet,
  100_000_000 // 0.1 SOL
);

if (result.isValid) {
  console.log('âœ… Transfer compliant');
} else {
  console.log('âŒ Transfer blocked:', result.errors);
}
```

Create Compliant Token

```typescript
import { createInitializeTransferHookInstruction } from '@solana/spl-token';
import { PDA } from '@gitdigital/solana-kyc-compliance-sdk';

// Get compliance PDAs
const pda = new PDA(programId);
const [transferHookPda] = await pda.getTransferHook();
const [permanentDelegatePda] = await pda.getPermanentDelegate();

// Create token with compliance extensions
const initializeTransferHookIx = createInitializeTransferHookInstruction(
  mint,
  authority,
  transferHookPda, // Your compliance program
  TOKEN_2022_PROGRAM_ID
);

const initializePermanentDelegateIx = createInitializePermanentDelegateInstruction(
  mint,
  authority,
  permanentDelegatePda, // Freeze authority
  TOKEN_2022_PROGRAM_ID
);
```

ðŸŽ¯ Use Cases

1. Regulated DeFi Platforms

Â· KYC-gated liquidity pools
Â· Compliance-aware lending protocols
Â· Permissioned trading pairs

2. Real World Asset (RWA) Tokenization

Â· Securities tokens with investor verification
Â· Real estate tokens with accreditation checks
Â· Private equity tokens with transfer restrictions

3. Institutional DeFi

Â· Corporate treasury management
Â· Hedge fund on-chain operations
Â· Family office investment platforms

4. Cross-border Payments

Â· Compliant stablecoin transfers
Â· Remittance platforms with AML checks
Â· Business payments with KYC verification

ðŸ“Š Features

Core Compliance

Â· âœ… Multi-level KYC - Basic, Enhanced, Institutional
Â· âœ… Country Restrictions - Whitelist/blacklist support
Â· âœ… Accreditation Checks - Investor qualification
Â· âœ… Transfer Limits - Amount-based controls
Â· âœ… Real-time Validation - On-chain transfer checks
Â· âœ… Freeze/Unfreeze - Emergency intervention

Token Extensions

Â· âœ… Transfer Hook - Native compliance validation
Â· âœ… Permanent Delegate - Freeze authority
Â· âœ… Metadata - On-token compliance data
Â· âœ… Custom Extensions - Extensible architecture

Developer Experience

Â· âœ… TypeScript SDK - Full type safety
Â· âœ… Comprehensive Examples - Production-ready code
Â· âœ… Error Handling - Clear error messages
Â· âœ… Batch Operations - Efficient bulk processing
Â· âœ… Testing Suite - Complete test coverage

ðŸš€ Getting Started

1. Deploy the Program

```bash
# Build and deploy
npm run build:program
solana program deploy dist/program/kyc_compliance.so

# Initialize program
ts-node deploy/deploy.ts
```

2. Run Examples

```bash
# Register an investor
npm run example:register

# Create compliant token
npm run example:token

# Test transfer validation
npm run example:transfer

# Admin operations
npm run example:admin
```

3. Integrate into Your App

```typescript
// Example: DEX integration
async function swapWithCompliance(
  user: PublicKey,
  amountIn: number,
  amountOut: number
) {
  // Check user compliance
  const status = await client.getStatus(user);
  
  if (!status.isRegistered || status.isFrozen) {
    throw new Error('User not compliant');
  }

  // Check transfer would be compliant
  const result = await client.checkTransfer(
    user,
    poolAddress,
    amountIn
  );

  if (!result.isValid) {
    throw new Error(`Transfer not compliant: ${result.errors.join(', ')}`);
  }

  // Execute compliant swap
  return await executeSwap(user, amountIn, amountOut);
}
```

ðŸ”§ Configuration

Program IDs

Â· Mainnet: TODO: Add mainnet program ID
Â· Devnet: KycCompliance111111111111111111111111111111111
Â· Localnet: KycCompliance111111111111111111111111111111111

Default Policy

```typescript
{
  requireKYCForTransfer: true,
  allowAnonymousSender: false,
  allowAnonymousReceiver: false,
  maxTransferAmount: 1_000_000_000, // 1 SOL
  minKYCLevel: 1, // Basic verification
  supportedCountries: ['US', 'GB', 'DE', 'FR', 'JP', 'CA', 'AU', 'SG', 'CH', 'NL'],
  restrictedCountries: ['RU', 'KP', 'IR', 'SY', 'CU'],
  isActive: true,
  requireAccreditation: false,
  maxWalletsPerInvestor: 5,
}
```

ðŸ“š Documentation

Â· ARCHITECTURE.md - System design and data flow
Â· COMPLIANCE.md - Regulatory alignment and disclaimers
Â· DEVELOPER_GUIDE.md - Integration and extension guide
Â· API Reference - Complete SDK documentation
Â· Examples - Working code examples

ðŸ¤ Contributing

We welcome contributions! Please see CONTRIBUTING.md for details.

1. Fork the repository
2. Create a feature branch
3. Add tests for your changes
4. Submit a pull request

âš–ï¸ License

MIT License - see LICENSE for details.

ðŸ†˜ Support

Â· GitHub Issues: Report bugs or request features
Â· Documentation: Full API reference
Â· Examples: Complete working examples
Â· Community: Join our Discord

---

Built with â¤ï¸ by the Gitdigital team for the Solana ecosystem

Disclaimer: This is compliance infrastructure, not legal advice. Consult legal counsel for regulatory compliance.
EOF
